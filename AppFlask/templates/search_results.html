{% extends 'base.html' %}

{% block title %}Résultats de recherche{% endblock %}

{% block content %}
    <h2>Résultats pour "{{ query }}"</h2>

    {% if results %}
    <ul>
        {% for result in results %}
        <li>
            {% if result.type == 'document' %}
                <strong>Document :</strong> {{ result.titre }} (Ajouté le {{ result.date_ajout }})
                <a href="{{ url_for('document.view_document', doc_id=result.id) }}">Voir</a>
            {% elif result.type == 'ocr' %}
                <strong>Texte OCR :</strong> {{ result.titre }} (Scanné le {{ result.date_scan }})
                <a href="{{ url_for('view_scanned_document', scan_id=result.id) }}">Voir le texte extrait</a>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>Aucun résultat trouvé.</p>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, message in messages %}
            <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
    {% endwith %}
{% endblock %}
